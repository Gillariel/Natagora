<ui:composition template="/WEB-INF/template/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <!-- All content outside an ui:define will be considered as a comment and not be rendered -->

    <ui:define name="title">
        See Session
    </ui:define>

    <!-- Custom CSS for this page -->
    <ui:define name="css">
        <link href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="https://cdn.datatables.net/buttons/1.4.2/css/buttons.bootstrap.min.css"  rel="stylesheet" type="text/css" />
        <h:outputStylesheet name="plugins/bower_components/gallery/css/animated-masonry-gallery.css"></h:outputStylesheet>
        <h:outputStylesheet name="plugins/bower_components/fancybox/ekko-lightbox.min.css"></h:outputStylesheet>
    </ui:define>

    <ui:define name="content">
        <c:set var="id">#{sessionHandler.find(param["id"]).id}</c:set>
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-4 white-box">
                <form class="text-center">
                    <div class="form-group text-center">
                        <h1>[Session "#{sessionHandler.find(param["id"]).id}"]<br/> #{sessionHandler.find(param["id"]).comment}</h1>
                    </div>
                    <div class="form-group centered">
                        <label>Validated : #{sessionHandler.find(param["id"]).validated}</label>
                    </div>
                    <div class="form-group">
                        <label>Date : #{sessionHandler.find(param["id"]).date} </label>
                    </div>
                    <div class="form-group">
                        <label>Latitude : #{sessionHandler.find(param["id"]).latitude}</label>
                    </div>
                    <div class="form-group">
                        <label>Longitude : #{sessionHandler.find(param["id"]).longitude}</label>
                    </div>
                    <div class="form-group">
                        <label>Weather : #{sessionHandler.find(param["id"]).weather} </label>
                    </div>
                    <div class="form-group">
                        <label>User pseudo : #{sessionHandler.find(param["id"]).user.pseudo}</label>
                    </div>
                </form>
            </div>
            <div class="col-md-4"></div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="white-box">
                    <h3 class="box-title">Observations of this session</h3>
                    <div id="gallery">
                        <div id="gallery-content">
                            <div id="gallery-content-center">
                                <c:forEach var="m" items="#{sessionHandler.mediaUrlBySession(id)}" >
                                    <a data-toggle="lightbox" data-gallery="multiimages" class="img-rounded img-responsive" alt="obs" href="#{m}">
                                        <img src="#{m}" alt="gallery" />
                                    </a>
                                </c:forEach>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>

    <!-- Custom Script for this page -->
    <ui:define name="js">
        <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.4.2/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.4.2/js/buttons.bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
        <script src="//cdn.datatables.net/buttons/1.4.2/js/buttons.html5.min.js"></script>
        <script src="//cdn.datatables.net/buttons/1.4.2/js/buttons.print.min.js"></script>
        <script src="//cdn.datatables.net/buttons/1.4.2/js/buttons.colVis.min.js"></script>

        <h:outputScript name="ample/js/datatable.js"/>

        <h:outputScript name="ample/js/ajax/sessionAjax.js"/>
        
        <h:outputScript name="plugins/bower_components/gallery/js/animated-masonry-gallery.js"></h:outputScript>
        <h:outputScript name="plugins/bower_components/gallery/js/jquery.isotope.min.js"></h:outputScript>
        <h:outputScript name="plugins/bower_components/fancybox/ekko-lightbox.min.js"></h:outputScript>
        
        <script type="text/javascript">
            $(document).ready(function($) {
                // delegate calls to data-toggle="lightbox"
                $(document).delegate('*[data-toggle="lightbox"]:not([data-gallery="navigateTo"])', 'click', function(event) {
                    event.preventDefault();
                    return $(this).ekkoLightbox({
                        onShown: function() {
                        },
                        onNavigate: function(direction, itemIndex) {
                        }
                    });
                });
                //Programatically call
                $('#open-image').click(function(e) {
                    e.preventDefault();
                    $(this).ekkoLightbox();
                });
                $('#open-youtube').click(function(e) {
                    e.preventDefault();
                    $(this).ekkoLightbox();
                });
                // navigateTo
                $(document).delegate('*[data-gallery="navigateTo"]', 'click', function(event) {
                    event.preventDefault();
                    var lb;
                    return $(this).ekkoLightbox({
                        onShown: function() {
                            lb = this;
                            $(lb.modal_content).on('click', '.modal-footer a', function(e) {
                                e.preventDefault();
                                lb.navigateTo(2);
                            });
                        }
                    });
                });
            });
        </script>
    </ui:define>

</ui:composition>
